const i18n = {
  ko: {
    brand: "Qbique",
    menuProblem: "ì‹œì¥ ê¸°íšŒ",
    menuSolution: "ì†”ë£¨ì…˜",
    menuFeatures: "ì£¼ìš” ê¸°ëŠ¥",
    menuTechnology: "ê¸°ìˆ ",
    menuPricing: "ì„œë¹„ìŠ¤",
    menuContact: "ë¬¸ì˜",
    
    heroTitle: "ì°¨ì„¸ëŒ€ ê¸ˆìœµ í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™”ë¥¼ êµ¬í˜„í•˜ëŠ” <br class='br-md' /><span class='accent'>ìƒˆë¡œìš´ ë°©ì‹</span>",
    heroSubtitle: "ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´, ë¦¬ìŠ¤í¬ ê´€ë¦¬, ìµœì  ë°°ë¶„ ì „ëµê¹Œì§€â€” <br class='br-md' />ê¸ˆìœµ í¬íŠ¸í´ë¦¬ì˜¤ ìš´ìš© ìš”êµ¬ì‚¬í•­ì„ í†µí•© ê´€ë¦¬í•˜ëŠ” í”Œë«í¼",
    ctaSolution: "ì†”ë£¨ì…˜ ì‚´í´ë³´ê¸°",
    ctaContact: "ë„ì… ë¬¸ì˜",
    
    problemTitle: "ê¸ˆìœµê¸°ê´€ì´ ì§ë©´í•œ ìš´ìš©ì˜ í˜„ì‹¤",
    problemLead: "ê¸ˆìœµ í¬íŠ¸í´ë¦¬ì˜¤ ìš´ìš©ì€ ë‹¨ìˆœí•œ ìµœì í™” ë¬¸ì œê°€ ì•„ë‹™ë‹ˆë‹¤. <br class='br-md' />ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì„ ë™ì‹œì— ì¶©ì¡±í•´ì•¼ í•˜ëŠ” ë³µí•©ì ì¸ ê³¼ì œì…ë‹ˆë‹¤.",
    problem1Title: "ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´",
    problem1Body: "ê·œì œ ì¤€ìˆ˜, ë‚´ë¶€ ë¦¬ìŠ¤í¬ ì •ì±…, ê³ ê°ë³„ íˆ¬ì ì„±í–¥, ESG ê¸°ì¤€ ë“± ë³µì¡í•œ ì œì•½ì„ ë™ì‹œì— ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.",
    problem2Title: "ìš´ìš© í”„ë¡œì„¸ìŠ¤ ë³µì¡ì„±",
    problem2Body: "ì „ëµ ìˆ˜ë¦½ë¶€í„° ì‹¤í–‰, ëª¨ë‹ˆí„°ë§, ë¦¬ë°¸ëŸ°ì‹±ê¹Œì§€ ì „ ê³¼ì •ì„ ì¼ê´€ëœ ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.",
    problem3Title: "ë¹ ë¥¸ ì‹œì¥ ë³€í™” ëŒ€ì‘",
    problem3Body: "ì‹œì¥ ìƒí™© ë³€í™”ì— ì‹ ì†í•˜ê²Œ ì „ëµì„ ì¡°ì •í•˜ê³  ìƒˆë¡œìš´ ê¸°ë²•ì„ ë„ì…í•´ì•¼ í•©ë‹ˆë‹¤.",
    problemNote: "ë§ì€ ê¸°ê´€ë“¤ì´ ì—‘ì…€, ìì²´ ì‹œìŠ¤í…œ, ì—¬ëŸ¬ ë²¤ë” ì†”ë£¨ì…˜ì˜ ì¡°í•©ìœ¼ë¡œ ëŒ€ì‘í•˜ë©° ìš´ìš© íš¨ìœ¨ì„± í™•ë³´ì— ì–´ë ¤ì›€ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤.",
    
    solutionTitle: "Qbique í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™” í”Œë«í¼",
    solutionLead: "ê¸ˆìœµ í¬íŠ¸í´ë¦¬ì˜¤ ìš´ìš©ì˜ ì „ ê³¼ì •ì„ í•˜ë‚˜ì˜ í”Œë«í¼ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.",
    value1Title: "í†µí•©ì„±",
    value1Body: "ì „ëµ êµ¬í˜„, ìµœì í™”, ëª¨ë‹ˆí„°ë§, ë¦¬í¬íŒ…ì„ í•˜ë‚˜ì˜ í”Œë«í¼ì—ì„œ ê´€ë¦¬",
    value2Title: "ìœ ì—°ì„±",
    value2Body: "ìì²´ ì „ëµ êµ¬í˜„ ê°€ëŠ¥, ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´ê³¼ ëª©ì  í•¨ìˆ˜ ì§€ì›",
    value3Title: "ê¸°ìˆ  ì„ ë„",
    value3Body: "ì–‘ì ì»´í“¨íŒ…ê³¼ ë¨¸ì‹ ëŸ¬ë‹ì„ í™œìš©í•œ ì§€ì†ì  ì„±ëŠ¥ ê°œì„ ",
    value4Title: "ì‚¬ìš© í¸ì˜ì„±",
    value4Body: "ì§ê´€ì  ì¸í„°í˜ì´ìŠ¤, ìƒì„±í˜• AI ì—°ë™ìœ¼ë¡œ ì§„ì… ì¥ë²½ ìµœì†Œí™”",
    
    featuresTitle: "ì£¼ìš” ê¸°ëŠ¥",
    feature1Title: "ìœ ì—°í•œ ì „ëµ êµ¬í˜„ í™˜ê²½",
    feature1Body: "ê³ ê°ì´ ìì²´ ìš´ìš© ì „ëµê³¼ ëª¨ë¸ì„ í”Œë«í¼ ìƒì—ì„œ ì§ì ‘ êµ¬í˜„í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ëª©ì  í•¨ìˆ˜ì™€ ì œì•½ ì¡°ê±´ì„ ììœ ë¡­ê²Œ ì¡°í•©í•˜ì—¬ ì „ëµ ë³€ê²½ê³¼ ì‹¤í—˜ì„ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    feature2Title: "ê³ ê¸‰ ìµœì í™” ì—”ì§„",
    feature2Body: "ëŒ€ê·œëª¨ ìì‚°êµ°ì—ì„œë„ íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ìµœì í™” ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì–‘ì ì»´í“¨íŒ…ì„ í™œìš©í•œ íƒìƒ‰ ë²”ìœ„ í™•ì¥ ì˜µì…˜ê³¼ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ìˆ˜ìµë¥  ì „ë§ ëª¨ë¸ì„ í†µí•©í•˜ì—¬ ë” ë‚˜ì€ ì˜ì‚¬ê²°ì •ì„ ì§€ì›í•©ë‹ˆë‹¤.",
    feature3Title: "ë¬¸ì œ ì •ì˜ ë° ë¦¬í¬íŒ…",
    feature3Body: "ì§ê´€ì ì¸ ì›¹ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ìµœì í™” ë¬¸ì œë¥¼ ì‰½ê²Œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì„±í˜• AIë¥¼ í™œìš©í•œ ë³´ê³ ì„œ ìë™ ìƒì„± ê¸°ëŠ¥ìœ¼ë¡œ ì˜ì‚¬ê²°ì • ê³¼ì •ì˜ ì¶”ì ê³¼ ë¬¸ì„œí™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.",
    feature4Title: "ChatDevOps",
    feature4Body: "ìƒì„±í˜• AI ì±—ë´‡ì„ í†µí•´ í”Œë«í¼ì˜ ëª¨ë“  ê¸°ëŠ¥ì— ì ‘ê·¼í•©ë‹ˆë‹¤. ê°œë°œì ëª¨ë“œì—ì„œëŠ” ìµœì í™” ì—”ì§„ ë¡œì§ì„ ì§ì ‘ êµ¬í˜„í•˜ê³ , ì‚¬ìš©ì ëª¨ë“œì—ì„œëŠ” ìµœì í™” ë¬¸ì œë¥¼ ì •ì˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. SNS ë„êµ¬ì™€ë„ ì—°ë™ë©ë‹ˆë‹¤.",
    
    technologyTitle: "ê¸°ìˆ ì  ì°¨ë³„ì ",
    techKeyword1: "íš¨ìœ¨ì„±",
    techKeyword2: "ê³ í’ˆì§ˆ",
    techKeyword3: "ì •í™•ì„±",
    tech1Title: "íœ´ë¦¬ìŠ¤í‹± + ì„ë² ë””ë“œ ìµœì í™”",
    tech1Body: "í¬íŠ¸í´ë¦¬ì˜¤ ìì‚° ì„ íƒ ë¬¸ì œëŠ” ìì‚° ìˆ˜ê°€ ì¦ê°€í• ìˆ˜ë¡ íƒìƒ‰ ê³µê°„ì´ ì§€ìˆ˜ì ìœ¼ë¡œ ì¦ê°€í•˜ëŠ” ë³¸ì§ˆì  ì–´ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤. ë‹¹ì‚¬ì˜ íœ´ë¦¬ìŠ¤í‹± ê¸°ë°˜ ì ‘ê·¼ë²•ì€ ì´ ë¬¸ì œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ìš°íšŒí•˜ì—¬, í•©ë¦¬ì ì¸ ê³„ì‚° ë¹„ìš©ìœ¼ë¡œ ìš°ìˆ˜í•œ ì¤€ ìµœì í•´ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.",
    tech2Title: "ì–‘ì-ê³ ì „ í•˜ì´ë¸Œë¦¬ë“œ ìµœì í™”",
    tech2Body: "ê³ ì „ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ 1ì°¨ ìµœì í™”ë¥¼ ìˆ˜í–‰í•œ í›„, ì–‘ì ì–´ë‹ë§ì„ í†µí•´ ë” ë„“ì€ íƒìƒ‰ ê³µê°„ì—ì„œ ê°œì„ ëœ í•´ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤. í˜„ì¬ ìƒìš©í™”ëœ ì–‘ì ì»´í“¨íŒ… ê¸°ìˆ ì„ ì‹¤ìš©ì ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤.",
    tech3Title: "ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ìˆ˜ìµë¥  ì „ë§",
    tech3Body: "ì‹œì¥ ë°ì´í„°ì™€ ë‹¤ì–‘í•œ íŒ©í„°ë¥¼ í™œìš©í•œ ìˆ˜ìµë¥  ì˜ˆì¸¡ ëª¨ë¸ì„ ì œê³µí•©ë‹ˆë‹¤. ìƒì„±í˜• AIê°€ ì œê³µí•˜ëŠ” ì‹œì¥ ë¶„ì„ ì „ë§ì´ë‚˜ ì „ë¬¸ê°€ ì˜ê²¬ë„ ìš©ì´í•˜ê²Œ ë°˜ì˜í•  ìˆ˜ ìˆì–´, ë‹¤ì–‘í•œ ì „ë§ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìµœì í™”ì— ë°˜ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    quoteToggle: "ğŸ’¬ Open Quote",
    quoteToggleClose: "ğŸ’¬ Close Quote",
    quote1Text: "We formulate desiderata which will serve as a gauge of success in our subsequent considerations; but it is in accordance with the usual heuristic procedure to reason about these desiderataâ€”even before we are able to satisfiy them.",
    quote1Cite: "â€” John von Neumann & Oskar Morgenstern, Theory of Games and Economic Behavior (1944)",
    quote2Text: "If I were forced to sum up in one sentence what the Copenhagen interpretation says to me, it would be â€œShut up and calculate!â€ But I won't shut up. I would rather celebrate the strangeness of quantum theory than deny it, ...",
    quote2Cite: "â€” N. David Mermin, What's Wrong with This Pillow? (1989)",
    quote3Text: "Just as the ability to devise simple but evocative models is the signature of the great scientist so overelaboration and overparameterization is often the mark of mediocrity. Box (1974)â€”Our theoretical analysis shows the flaw in this view.",
    quote3Cite: "â€” Brian Kelly, et. al., The Virtue of Complexity in Return Prediction (2024)",
    roadmapTitle: "ê¸°ìˆ  ë¡œë“œë§µ",
    phase1Label: "í˜„ì¬",
    phase1Text: "ê³ ì „ ìµœì í™” ì—”ì§„ + ì›¹ í”Œë«í¼",
    phase2Label: "ë‹¨ê¸°",
    phase2Text: "í•˜ì´ë¸Œë¦¬ë“œ ì–‘ì ì–´ë‹ë§ í†µí•©",
    phase3Label: "ì¤‘ì¥ê¸°",
    phase3Text: "FTQC ì‹œëŒ€ íšŒë¡œ ê¸°ë°˜ ì–‘ì ì•Œê³ ë¦¬ì¦˜",
    
    pricingTitle: "ì„œë¹„ìŠ¤ êµ¬ì„±",
    pricing1Title: "í”Œë«í¼ ê¸°ë³¸ êµ¬ë…",
    pricing1F1: "í”Œë«í¼ ì ‘ê·¼ ë° ìì²´ ì „ëµ êµ¬í˜„ í™˜ê²½",
    pricing1F2: "ê¸°ë³¸ ìµœì í™” ì—”ì§„ ì‚¬ìš©",
    pricing1F3: "í‘œì¤€ ì œì•½ ì¡°ê±´ ë° ëª©ì  í•¨ìˆ˜ ì§€ì›",
    pricing2Title: "í”„ë¦¬ë¯¸ì—„ ëª¨ë¸ êµ¬ë…",
    pricing2F1: "Qbique ê°œë°œ ê³ ê¸‰ ìµœì í™” ëª¨ë¸",
    pricing2F2: "ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ìˆ˜ìµë¥  ì „ë§ ëª¨ë¸",
    pricing2F3: "ë²¤ì¹˜ë§ˆí‚¹ ê²°ê³¼ í™•ì¸ í›„ ì„ íƒì  êµ¬ë…",
    pricing2F4: "ì‹ ê·œ ëª¨ë¸ ìš°ì„  ì ‘ê·¼ê¶Œ",
    pricing3Title: "ì–‘ì ì»´í“¨íŒ… ì˜µì…˜",
    pricing3F1: "í•˜ì´ë¸Œë¦¬ë“œ ì–‘ì ì–´ë‹ë§ ìµœì í™”",
    pricing3F2: "í™•ì¥ëœ íƒìƒ‰ ê³µê°„ì—ì„œ ê°œì„ ëœ ìµœì í•´",
    pricing3F3: "ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ì¶”ê°€ ê³¼ê¸ˆ",
    
    customersTitle: "ëª©í‘œ ê³ ê°",
    customer1Title: "ìì‚°ìš´ìš©ì‚¬ ë° ì œë„ê¶Œ ê¸ˆìœµê¸°ê´€",
    customer1Body: "ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´ í•˜ì—ì„œ ëŒ€ê·œëª¨ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ìš´ìš©í•˜ë©°, ê·œì œ ì¤€ìˆ˜ì™€ ë¦¬ìŠ¤í¬ ê´€ë¦¬ê°€ ì¤‘ìš”í•œ ê¸°ê´€",
    customer2Title: "í—¤ì§€í€ë“œ ë° íŒ¨ë°€ë¦¬ì˜¤í”¼ìŠ¤",
    customer2Body: "ê·œì œì—ì„œ ë¹„êµì  ììœ ë¡œìš°ë©°, ìµœê³  ìˆ˜ì¤€ì˜ íˆ¬ì ì„±ê³¼ì™€ ìƒˆë¡œìš´ ê¸°ìˆ  ë„ì…ì„ ì¶”êµ¬í•˜ëŠ” ê¸°ê´€",
    
    contactTitle: "ë„ì… ë¬¸ì˜",
    contactInfo: "í”Œë«í¼ ë„ì… ë° í˜‘ë ¥ ë¬¸ì˜: <a href='mailto:contact@qbique.com'>contact@qbique.com</a>",
    formName: "ì„±í•¨",
    formCompany: "ì†Œì†",
    formEmail: "ì´ë©”ì¼",
    formPhone: "ì—°ë½ì²˜",
    formMessage: "ë¬¸ì˜ ë‚´ìš©",
    formSend: "ë¬¸ì˜í•˜ê¸°",
    
    rights: "All rights reserved."
  },
  en: {
    brand: "Qbique",
    menuProblem: "Market",
    menuSolution: "Solution",
    menuFeatures: "Features",
    menuTechnology: "Technology",
    menuPricing: "Services",
    menuContact: "Contact",
    
    heroTitle: "A <span class='accent'>new approach</span> <br class='br-md' />to next-generation portfolio optimization",
    heroSubtitle: "Constraints, risk management, optimal allocationâ€” <br class='br-md' />an integrated platform for institutional portfolio management",
    ctaSolution: "Explore Solution",
    ctaContact: "Contact Us",
    
    problemTitle: "The Reality of Portfolio Management",
    problemLead: "Portfolio management is not just an optimization problem. <br class='br-md' />It's a complex challenge requiring simultaneous satisfaction of diverse requirements.",
    problem1Title: "Multiple Constraints",
    problem1Body: "Regulatory compliance, internal risk policies, client preferences, ESG criteriaâ€”all must be managed simultaneously.",
    problem2Title: "Process Complexity",
    problem2Body: "From strategy development to execution, monitoring, and rebalancingâ€”maintaining consistency across the entire process is challenging.",
    problem3Title: "Rapid Market Response",
    problem3Body: "Strategies must be quickly adjusted to market changes while adopting new techniques.",
    problemNote: "Many institutions rely on combinations of Excel, in-house systems, and multiple vendor solutions, struggling to achieve operational efficiency.",
    
    solutionTitle: "Qbique Portfolio Optimization Platform",
    solutionLead: "We provide an environment where the entire portfolio management process can be managed in one platform.",
    value1Title: "Integration",
    value1Body: "Strategy implementation, optimization, monitoring, and reporting in one platform",
    value2Title: "Flexibility",
    value2Body: "Implement your own strategies with support for various constraints and objectives",
    value3Title: "Technology Leadership",
    value3Body: "Continuous improvement through quantum computing and machine learning",
    value4Title: "Ease of Use",
    value4Body: "Intuitive interface with generative AI integration minimizes barriers",
    
    featuresTitle: "Key Features",
    feature1Title: "Flexible Strategy Implementation",
    feature1Body: "Clients can implement and test their own strategies directly on the platform. Freely combine various objective functions and constraints for rapid strategy experimentation.",
    feature2Title: "Advanced Optimization Engine",
    feature2Body: "Efficient optimization algorithms that work with large asset universes. Quantum computing options for expanded search space and ML-based return forecasting models support better decision-making.",
    feature3Title: "Problem Definition & Reporting",
    feature3Body: "Define optimization problems easily through an intuitive web-based interface. Generative AI-powered automated report generation supports decision tracking and documentation.",
    feature4Title: "ChatDevOps",
    feature4Body: "Access all platform features through a generative AI chatbot. In developer mode, implement optimization engine logic directly; in user mode, define and execute optimization problems. Also integrates with collaboration tools like Slack and Teams.",
    
    technologyTitle: "Technical Differentiation",
    techKeyword1: "Efficiency",
    techKeyword2: "Quality",
    techKeyword3: "Accuracy",
    tech1Title: "Heuristic + Embedded Optimization",
    tech1Body: "Portfolio asset selection inherently faces exponentially growing search space as the number of assets increases. Our heuristic-based approach effectively circumvents this challenge, finding high-quality near-optimal solutions at reasonable computational cost.",
    tech2Title: "Quantum-Classical Hybrid Optimization",
    tech2Body: "After initial optimization with classical algorithms, quantum annealing explores a broader search space for improved solutions. Practical application of currently commercialized quantum computing technology.",
    tech3Title: "ML-Based Return Forecasting",
    tech3Body: "Return prediction models utilizing market data and various factors. Seamlessly integrates market outlook from generative AI or expert opinions, enabling diverse forecast scenarios to be reflected in optimization.",
    quoteToggle: "ğŸ’¬ View Quote",
    quoteToggleClose: "ğŸ’¬ Hide Quote",
    quote1Text: "[John von Neumann quote - to be edited]",
    quote1Cite: "â€” John von Neumann",
    quote2Text: "[Yale University Professor quote - to be edited]",
    quote2Cite: "â€” Yale University Professor",
    quote3Text: "[Brian Kelly - parsimonious model rebuttal quote - to be edited]",
    quote3Cite: "â€” Brian Kelly",
    roadmapTitle: "Technology Roadmap",
    phase1Label: "Current",
    phase1Text: "Classical optimization engine + Web platform",
    phase2Label: "Near-term",
    phase2Text: "Hybrid quantum annealing integration",
    phase3Label: "Long-term",
    phase3Text: "FTQC-era gate-based quantum algorithms",
    
    pricingTitle: "Service Offerings",
    pricing1Title: "Platform Basic Subscription",
    pricing1F1: "Platform access and strategy implementation environment",
    pricing1F2: "Basic optimization engine usage",
    pricing1F3: "Standard constraints and objective functions",
    pricing2Title: "Premium Model Subscription",
    pricing2F1: "Qbique-developed advanced optimization models",
    pricing2F2: "ML-based return forecasting models",
    pricing2F3: "Subscribe after reviewing benchmark results",
    pricing2F4: "Priority access to new models",
    pricing3Title: "Quantum Computing Option",
    pricing3F1: "Hybrid quantum annealing optimization",
    pricing3F2: "Improved solutions from expanded search space",
    pricing3F3: "Usage-based additional billing",
    
    customersTitle: "Target Customers",
    customer1Title: "Asset Managers & Institutional Investors",
    customer1Body: "Institutions managing large portfolios under various constraints, where regulatory compliance and risk management are critical",
    customer2Title: "Hedge Funds & Family Offices",
    customer2Body: "Institutions relatively free from regulations, pursuing top-tier investment performance and eager to adopt new technologies",
    
    contactTitle: "Contact Us",
    contactInfo: "For platform adoption and partnership inquiries: <a href='mailto:contact@qbique.com'>contact@qbique.com</a>",
    formName: "Name",
    formCompany: "Company",
    formEmail: "Email",
    formPhone: "Phone",
    formMessage: "Message",
    formSend: "Submit",
    
    rights: "All rights reserved."
  }
};

let currentLang = localStorage.getItem('lang') || 'ko';

function applyLang(lang) {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (i18n[lang][key]) el.innerHTML = i18n[lang][key];
  });
  document.documentElement.lang = lang;
  currentLang = lang;
  localStorage.setItem('lang', lang);
}

(function initTheme(){
  const root = document.documentElement;
  const saved = localStorage.getItem('theme');
  const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
  const current = saved || (prefersLight ? 'light' : 'dark');
  if (current === 'light') root.setAttribute('data-theme', 'light');
})();

document.addEventListener('DOMContentLoaded', () => {
  const year = document.getElementById('year');
  if (year) year.textContent = new Date().getFullYear();

  applyLang(currentLang);

  const langBtn = document.getElementById('langToggle');
  langBtn?.addEventListener('click', () => {
    applyLang(currentLang === 'ko' ? 'en' : 'ko');
  });

  const toggle = document.getElementById('themeToggle');
  toggle?.addEventListener('click', () => {
    const light = document.documentElement.getAttribute('data-theme') === 'light';
    document.documentElement.setAttribute('data-theme', light ? '' : 'light');
    localStorage.setItem('theme', light ? 'dark' : 'light');
  });

  // Mobile nav
  const btn = document.querySelector('.nav-toggle');
  const list = document.getElementById('navMenu');
  btn?.addEventListener('click', () => {
    const open = list?.classList.toggle('open');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  });

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
      const id = a.getAttribute('href')?.slice(1);
      const target = id ? document.getElementById(id) : null;
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        list?.classList.remove('open');
      }
    });
  });

  // Demo form handler
  const form = document.querySelector('.contact-form');
  const note = document.getElementById('formNote');
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    if (!note) return;
    note.textContent = currentLang === 'ko' 
      ? 'ê°ì‚¬í•©ë‹ˆë‹¤! ë‹´ë‹¹ìê°€ í™•ì¸ í›„ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.' 
      : 'Thank you! We will contact you shortly.';
    setTimeout(() => note.textContent = '', 5000);
  });

  // Quote toggle functionality
  document.querySelectorAll('.quote-toggle').forEach(btn => {
    btn.addEventListener('click', () => {
      const quoteContent = btn.nextElementSibling;
      const isExpanded = btn.getAttribute('aria-expanded') === 'true';
      
      btn.setAttribute('aria-expanded', !isExpanded);
      quoteContent.hidden = isExpanded;
      
      // Update button text
      const toggleText = isExpanded 
        ? (i18n[currentLang]?.quoteToggle || 'ğŸ’¬ ì¸ìš©êµ¬ ë³´ê¸°')
        : (i18n[currentLang]?.quoteToggleClose || 'ğŸ’¬ ì¸ìš©êµ¬ ì ‘ê¸°');
      btn.textContent = toggleText;
    });
  });
});
