const i18n = {
  ko: {
    brand: "Qbique",
    menuProblem: "시장 기회",
    menuSolution: "솔루션",
    menuFeatures: "주요 기능",
    menuTechnology: "기술",
    menuPricing: "서비스",
    menuContact: "문의",
    
    heroTitle: "차세대 금융 포트폴리오 최적화를 구현하는<br class='br-md' /><span class='accent'>새로운 방식</span>",
    heroSubtitle: "다양한 제약 조건, 리스크 관리, 최적 배분 전략까지—<br class='br-md' />금융기관의 금융 포트폴리오 운용 요구사항을 통합 관리하는 플랫폼",
    ctaSolution: "솔루션 살펴보기",
    ctaContact: "도입 문의",
    
    problemTitle: "금융기관이 직면한 운용의 현실",
    problemLead: "금융 포트폴리오 운용은 단순한 최적화 문제가 아닙니다.<br class='br-md' />다양한 요구사항을 동시에 충족해야 하는 복합적인 과제입니다.",
    problem1Title: "다양한 제약 조건",
    problem1Body: "규제 준수, 내부 리스크 정책, 고객별 투자 성향, ESG 기준 등 복잡한 제약을 동시에 관리해야 합니다.",
    problem2Title: "운용 프로세스 복잡성",
    problem2Body: "전략 수립부터 실행, 모니터링, 리밸런싱까지 전 과정을 일관된 기준으로 관리하기 어렵습니다.",
    problem3Title: "빠른 시장 변화 대응",
    problem3Body: "시장 상황 변화에 신속하게 전략을 조정하고 새로운 기법을 도입해야 합니다.",
    problemNote: "많은 기관들이 엑셀, 자체 시스템, 여러 벤더 솔루션의 조합으로 대응하며 운용 효율성 확보에 어려움을 겪고 있습니다.",
    
    solutionTitle: "Qbique 포트폴리오 최적화 플랫폼",
    solutionLead: "금융 포트폴리오 운용의 전 과정을 하나의 플랫폼에서 관리할 수 있는 환경을 제공합니다.",
    value1Title: "통합성",
    value1Body: "전략 구현, 최적화, 모니터링, 리포팅을 하나의 플랫폼에서 관리",
    value2Title: "유연성",
    value2Body: "자체 전략 구현 가능, 다양한 제약 조건과 목적 함수 지원",
    value3Title: "기술 선도",
    value3Body: "양자 컴퓨팅과 머신러닝을 활용한 지속적 성능 개선",
    value4Title: "사용 편의성",
    value4Body: "직관적 인터페이스, 생성형 AI 연동으로 진입 장벽 최소화",
    
    featuresTitle: "주요 기능",
    feature1Title: "유연한 전략 구현 환경",
    feature1Body: "고객이 자체 운용 전략과 모델을 플랫폼 상에서 직접 구현하고 테스트할 수 있습니다. 다양한 목적 함수와 제약 조건을 자유롭게 조합하여 전략 변경과 실험을 빠르게 수행할 수 있습니다.",
    feature2Title: "고급 최적화 엔진",
    feature2Body: "대규모 자산군에서도 효율적으로 작동하는 최적화 알고리즘을 제공합니다. 양자 컴퓨팅을 활용한 탐색 범위 확장 옵션과 머신러닝 기반 수익률 전망 모델을 통합하여 더 나은 의사결정을 지원합니다.",
    feature3Title: "운용 편의성 극대화",
    feature3Body: "직관적인 웹 기반 인터페이스로 쉽게 사용할 수 있습니다. 생성형 AI를 활용한 최적화 문제 정의 및 보고서 자동 생성 기능으로 의사결정 과정의 추적과 문서화를 지원합니다.",
    
    technologyTitle: "기술적 차별점",
    tech1Title: "휴리스틱 + 임베디드 최적화",
    tech1Body: "포트폴리오 자산 선택 문제는 자산 수가 증가할수록 탐색 공간이 지수적으로 증가하는 본질적 어려움이 있습니다. 당사의 휴리스틱 기반 접근법은 이 문제를 효과적으로 우회하여, 합리적인 계산 비용으로 우수한 준 최적해를 탐색합니다.",
    tech2Title: "양자-고전 하이브리드 최적화",
    tech2Body: "고전 알고리즘으로 1차 최적화를 수행한 후, 양자 어닐링을 통해 더 넓은 탐색 공간에서 개선된 해를 탐색합니다. 현재 상용화된 양자 컴퓨팅 기술을 실용적으로 활용합니다.",
    tech3Title: "머신러닝 기반 수익률 전망",
    tech3Body: "시장 데이터와 다양한 팩터를 활용한 수익률 예측 모델을 제공합니다. 생성형 AI가 제공하는 시장 분석 전망이나 전문가 의견도 용이하게 반영할 수 있어, 다양한 전망 시나리오를 최적화에 반영할 수 있습니다.",
    roadmapTitle: "기술 로드맵",
    phase1Label: "현재",
    phase1Text: "고전 최적화 엔진 + 웹 플랫폼",
    phase2Label: "단기",
    phase2Text: "하이브리드 양자 어닐링 통합",
    phase3Label: "중장기",
    phase3Text: "FTQC 시대 회로 기반 양자 알고리즘",
    
    pricingTitle: "서비스 구성",
    pricing1Title: "플랫폼 기본 구독",
    pricing1F1: "플랫폼 접근 및 자체 전략 구현 환경",
    pricing1F2: "기본 최적화 엔진 사용",
    pricing1F3: "표준 제약 조건 및 목적 함수 지원",
    pricing2Title: "프리미엄 모델 구독",
    pricing2F1: "Qbique 개발 고급 최적화 모델",
    pricing2F2: "머신러닝 기반 수익률 전망 모델",
    pricing2F3: "벤치마킹 결과 확인 후 선택적 구독",
    pricing2F4: "신규 모델 우선 접근권",
    pricing3Title: "양자 컴퓨팅 옵션",
    pricing3F1: "하이브리드 양자 어닐링 최적화",
    pricing3F2: "확장된 탐색 공간에서 개선된 최적해",
    pricing3F3: "사용량 기반 추가 과금",
    
    customersTitle: "목표 고객",
    customer1Title: "자산운용사 및 제도권 금융기관",
    customer1Body: "다양한 제약 조건 하에서 대규모 포트폴리오를 운용하며, 규제 준수와 리스크 관리가 중요한 기관",
    customer2Title: "헤지펀드 및 패밀리오피스",
    customer2Body: "규제에서 비교적 자유로우며, 최고 수준의 투자 성과와 새로운 기술 도입을 추구하는 기관",
    
    contactTitle: "도입 문의",
    contactInfo: "플랫폼 도입 및 협력 문의: <a href='mailto:contact@qbique.com'>contact@qbique.com</a>",
    formName: "성함",
    formCompany: "소속",
    formEmail: "이메일",
    formPhone: "연락처",
    formMessage: "문의 내용",
    formSend: "문의하기",
    
    rights: "All rights reserved."
  },
  en: {
    brand: "Qbique",
    menuProblem: "Market",
    menuSolution: "Solution",
    menuFeatures: "Features",
    menuTechnology: "Technology",
    menuPricing: "Services",
    menuContact: "Contact",
    
    heroTitle: "A <span class='accent'>new approach</span><br class='br-md' />to next-generation portfolio optimization",
    heroSubtitle: "Constraints, risk management, optimal allocation—<br class='br-md' />an integrated platform for institutional portfolio management",
    ctaSolution: "Explore Solution",
    ctaContact: "Contact Us",
    
    problemTitle: "The Reality of Portfolio Management",
    problemLead: "Portfolio management is not just an optimization problem.<br class='br-md' />It's a complex challenge requiring simultaneous satisfaction of diverse requirements.",
    problem1Title: "Multiple Constraints",
    problem1Body: "Regulatory compliance, internal risk policies, client preferences, ESG criteria—all must be managed simultaneously.",
    problem2Title: "Process Complexity",
    problem2Body: "From strategy development to execution, monitoring, and rebalancing—maintaining consistency across the entire process is challenging.",
    problem3Title: "Rapid Market Response",
    problem3Body: "Strategies must be quickly adjusted to market changes while adopting new techniques.",
    problemNote: "Many institutions rely on combinations of Excel, in-house systems, and multiple vendor solutions, struggling to achieve operational efficiency.",
    
    solutionTitle: "Qbique Portfolio Optimization Platform",
    solutionLead: "We provide an environment where the entire portfolio management process can be managed in one platform.",
    value1Title: "Integration",
    value1Body: "Strategy implementation, optimization, monitoring, and reporting in one platform",
    value2Title: "Flexibility",
    value2Body: "Implement your own strategies with support for various constraints and objectives",
    value3Title: "Technology Leadership",
    value3Body: "Continuous improvement through quantum computing and machine learning",
    value4Title: "Ease of Use",
    value4Body: "Intuitive interface with generative AI integration minimizes barriers",
    
    featuresTitle: "Key Features",
    feature1Title: "Flexible Strategy Implementation",
    feature1Body: "Clients can implement and test their own strategies directly on the platform. Freely combine various objective functions and constraints for rapid strategy experimentation.",
    feature2Title: "Advanced Optimization Engine",
    feature2Body: "Efficient optimization algorithms that work with large asset universes. Quantum computing options for expanded search space and ML-based return forecasting models support better decision-making.",
    feature3Title: "Maximized Operational Convenience",
    feature3Body: "Easy-to-use intuitive web interface. Generative AI-powered problem definition and automated report generation support decision tracking and documentation.",
    
    technologyTitle: "Technical Differentiation",
    tech1Title: "Heuristic + Embedded Optimization",
    tech1Body: "Portfolio asset selection inherently faces exponentially growing search space as the number of assets increases. Our heuristic-based approach effectively circumvents this challenge, finding high-quality near-optimal solutions at reasonable computational cost.",
    tech2Title: "Quantum-Classical Hybrid Optimization",
    tech2Body: "After initial optimization with classical algorithms, quantum annealing explores a broader search space for improved solutions. Practical application of currently commercialized quantum computing technology.",
    tech3Title: "ML-Based Return Forecasting",
    tech3Body: "Return prediction models utilizing market data and various factors. Seamlessly integrates market outlook from generative AI or expert opinions, enabling diverse forecast scenarios to be reflected in optimization.",
    roadmapTitle: "Technology Roadmap",
    phase1Label: "Current",
    phase1Text: "Classical optimization engine + Web platform",
    phase2Label: "Near-term",
    phase2Text: "Hybrid quantum annealing integration",
    phase3Label: "Long-term",
    phase3Text: "FTQC-era gate-based quantum algorithms",
    
    pricingTitle: "Service Offerings",
    pricing1Title: "Platform Basic Subscription",
    pricing1F1: "Platform access and strategy implementation environment",
    pricing1F2: "Basic optimization engine usage",
    pricing1F3: "Standard constraints and objective functions",
    pricing2Title: "Premium Model Subscription",
    pricing2F1: "Qbique-developed advanced optimization models",
    pricing2F2: "ML-based return forecasting models",
    pricing2F3: "Subscribe after reviewing benchmark results",
    pricing2F4: "Priority access to new models",
    pricing3Title: "Quantum Computing Option",
    pricing3F1: "Hybrid quantum annealing optimization",
    pricing3F2: "Improved solutions from expanded search space",
    pricing3F3: "Usage-based additional billing",
    
    customersTitle: "Target Customers",
    customer1Title: "Asset Managers & Institutional Investors",
    customer1Body: "Institutions managing large portfolios under various constraints, where regulatory compliance and risk management are critical",
    customer2Title: "Hedge Funds & Family Offices",
    customer2Body: "Institutions relatively free from regulations, pursuing top-tier investment performance and eager to adopt new technologies",
    
    contactTitle: "Contact Us",
    contactInfo: "For platform adoption and partnership inquiries: <a href='mailto:contact@qbique.com'>contact@qbique.com</a>",
    formName: "Name",
    formCompany: "Company",
    formEmail: "Email",
    formPhone: "Phone",
    formMessage: "Message",
    formSend: "Submit",
    
    rights: "All rights reserved."
  }
};

let currentLang = localStorage.getItem('lang') || 'ko';

function applyLang(lang) {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (i18n[lang][key]) el.innerHTML = i18n[lang][key];
  });
  document.documentElement.lang = lang;
  currentLang = lang;
  localStorage.setItem('lang', lang);
}

(function initTheme(){
  const root = document.documentElement;
  const saved = localStorage.getItem('theme');
  const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
  const current = saved || (prefersLight ? 'light' : 'dark');
  if (current === 'light') root.setAttribute('data-theme', 'light');
})();

document.addEventListener('DOMContentLoaded', () => {
  const year = document.getElementById('year');
  if (year) year.textContent = new Date().getFullYear();

  applyLang(currentLang);

  const langBtn = document.getElementById('langToggle');
  langBtn?.addEventListener('click', () => {
    applyLang(currentLang === 'ko' ? 'en' : 'ko');
  });

  const toggle = document.getElementById('themeToggle');
  toggle?.addEventListener('click', () => {
    const light = document.documentElement.getAttribute('data-theme') === 'light';
    document.documentElement.setAttribute('data-theme', light ? '' : 'light');
    localStorage.setItem('theme', light ? 'dark' : 'light');
  });

  // Mobile nav
  const btn = document.querySelector('.nav-toggle');
  const list = document.getElementById('navMenu');
  btn?.addEventListener('click', () => {
    const open = list?.classList.toggle('open');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  });

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
      const id = a.getAttribute('href')?.slice(1);
      const target = id ? document.getElementById(id) : null;
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        list?.classList.remove('open');
      }
    });
  });

  // Demo form handler
  const form = document.querySelector('.contact-form');
  const note = document.getElementById('formNote');
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    if (!note) return;
    note.textContent = currentLang === 'ko' 
      ? '감사합니다! 담당자가 확인 후 연락드리겠습니다.' 
      : 'Thank you! We will contact you shortly.';
    setTimeout(() => note.textContent = '', 5000);
  });
});
